{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import'./styles/tailwind.css';import{BrowserRouter as Router,Route,Switch,Link,withRouter}from'react-router-dom';import LoginUser from'./components/login-user';import RegisterUser from'./components/register-user';import CreatePost from'./components/create-post';import Posts from'./components/load-posts';import ViewPost from'./components/view-post';import config from'./config';import Error from'./components/error';import{Auth}from\"aws-amplify\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={isAuthenticated:false,name:'',lastname:''};_this.hasAuthenticated=_this.hasAuthenticated.bind(_assertThisInitialized(_this));_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentWillMount\",value:function componentWillMount(){console.log(\"WHY\");this.onLoad();}},{key:\"onLoad\",value:function(){var _onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"TRYING\");_context.next=4;return Auth.currentSession();case 4:this.hasAuthenticated();_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(_context.t0!=='No current user'){alert(_context.t0);}case 10:case\"end\":return _context.stop();}}},_callee,this,[[0,7]]);}));function onLoad(){return _onLoad.apply(this,arguments);}return onLoad;}()},{key:\"hasAuthenticated\",value:function hasAuthenticated(){var _this2=this;console.log(\"DID IT\");Auth.currentAuthenticatedUser().then(function(user){console.log(\"USER\");console.log(user);_this2.setState({name:user.attributes.name,lastname:user.attributes.family_name,profile:user.attributes.profile});_this2.setState({isAuthenticated:true});});}},{key:\"handleLogout\",value:function(){var _handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Auth.signOut();case 2:this.setState({isAuthenticated:false,profile:\"\"});console.log(this.state.isAuthenticated);this.props.history.push(\"/login\");window.location.reload();case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleLogout(){return _handleLogout.apply(this,arguments);}return handleLogout;}()},{key:\"render\",value:function render(){var _this3=this;console.log(this.state);return React.createElement(\"div\",null,React.createElement(Router,{path:\"/App\"},React.createElement(\"nav\",{className:\"flex flex-wrap w-full justify-center h-16 border-b-2 border-solid font-sans border-gray-300\"},React.createElement(\"div\",{class:\"flex items-center justify-end w-full px-6 font-bold\"},React.createElement(Link,{to:\"/\",className:\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\"},\"Home\"),this.state.profile!==\"admin\"?React.createElement(Link,{to:\"/create\",className:\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\"},\"Create Post\"):React.createElement(\"p\",{className:\"mr-4\"},\"Currently in Administrator Mode\"),this.state.isAuthenticated?React.createElement(\"div\",{class:\"hidden sm:flex sm:items-center\"},React.createElement(\"button\",{class:\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\",onClick:this.handleLogout},\"Logout\")):React.createElement(\"div\",{class:\"hidden sm:flex sm:items-center\"},React.createElement(Link,{to:\"/login\",class:\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\"},\"Sign in\"),React.createElement(Link,{to:\"/signup\",class:\"text-gray-800 text-lg font-semibold border px-4 py-2 rounded-lg hover:text-green-600 hover:border-green-600\"},\"Sign up\")))),\"            \",React.createElement(\"br\",null),React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/\",render:function render(props){return React.createElement(Posts,Object.assign({},props,{isAuthenticated:_this3.state.isAuthenticated,hasAuthenticated:_this3.hasAuthenticated}));}}),React.createElement(Route,{path:\"/post/:id\",exact:true,component:ViewPost}),React.createElement(Route,{path:\"/create\",exact:true,render:function render(props){return React.createElement(CreatePost,Object.assign({},props,{firstname:_this3.name,family_name:_this3.family_name}));}}),React.createElement(Route,{path:\"/signup\",exact:true,render:function render(props){return React.createElement(RegisterUser,Object.assign({},props,{isAuthenticated:_this3.isAuthenticated,hasAuthenticated:_this3.hasAuthenticated}));}}),React.createElement(Route,{path:\"/login\",render:function render(props){return React.createElement(LoginUser,Object.assign({},props,{isAuthenticated:_this3.state.isAuthenticated,hasAuthenticated:_this3.hasAuthenticated}));}}),React.createElement(Route,{component:Error}))));}}]);return App;}(React.Component);export default withRouter(App);","map":{"version":3,"sources":["/Users/jonVan/Desktop/GitHub/cmpe172-project1/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","Link","withRouter","LoginUser","RegisterUser","CreatePost","Posts","ViewPost","config","Error","Auth","App","props","state","isAuthenticated","name","lastname","hasAuthenticated","bind","handleLogout","console","log","onLoad","currentSession","alert","currentAuthenticatedUser","then","user","setState","attributes","family_name","profile","signOut","history","push","window","location","reload","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport './styles/tailwind.css';\nimport {BrowserRouter as Router,Route,Switch,Link,withRouter} from 'react-router-dom';\nimport LoginUser from './components/login-user';\nimport RegisterUser from './components/register-user';\nimport CreatePost from './components/create-post';\nimport Posts from './components/load-posts';\nimport ViewPost from './components/view-post';                              \nimport config from './config';\nimport Error from './components/error';\n\nimport { Auth } from \"aws-amplify\";\n\n\nclass App extends React.Component {\t\n    constructor(props){\n        super(props)    \n        this.state ={\n            isAuthenticated:false,\n            name:'',\n            lastname:'',\n        }\n        this.hasAuthenticated = this.hasAuthenticated.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n    }\n\n    componentWillMount(){\n        console.log(\"WHY\");\n        this.onLoad();\n    }\n\n async onLoad() {\n    try {\n        console.log(\"TRYING\");\n        await Auth.currentSession();\n        this.hasAuthenticated();\n    }\n    catch(e) {\n        if (e !== 'No current user') {\n        alert(e);\n        }\n    }\n\n    }\n    \n    hasAuthenticated(){\n        console.log(\"DID IT\");\n        Auth.currentAuthenticatedUser()\n        .then(user => {\n            console.log(\"USER\");\n            console.log(user);\n        this.setState({name:user.attributes.name, lastname:user.attributes.family_name, profile:user.attributes.profile});    \n        this.setState({isAuthenticated:true});\n    })\n    }\n    async handleLogout() {\n        await Auth.signOut();\n        this.setState({isAuthenticated:false, profile:\"\"});\n        console.log(this.state.isAuthenticated);\n        this.props.history.push(\"/login\");\n        window.location.reload();\n      }\n\trender() {\n        console.log(this.state);\n    \treturn (\n            <div>\n            <Router path=\"/App\" >\n            <nav className=\"flex flex-wrap w-full justify-center h-16 border-b-2 border-solid font-sans border-gray-300\">\n            <div class=\"flex items-center justify-end w-full px-6 font-bold\">\n              \n            <Link to=\"/\" className=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">Home</Link>\n            {this.state.profile !== \"admin\" ?\n             (<Link to=\"/create\" className=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">Create Post</Link>)\n             :(<p className=\"mr-4\">\n                 Currently in Administrator Mode\n             </p>)}            \n             {\n              this.state.isAuthenticated ?(\n                        <div class=\"hidden sm:flex sm:items-center\">\n\n          <button class=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\" onClick={this.handleLogout}>Logout</button>\n          </div>\n            )\n          :(\n            <div class=\"hidden sm:flex sm:items-center\">\n          <Link to=\"/login\" class=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">Sign in</Link>\n          <Link to=\"/signup\" class=\"text-gray-800 text-lg font-semibold border px-4 py-2 rounded-lg hover:text-green-600 hover:border-green-600\">Sign up</Link>\n          </div> \n          )\n            }\n          </div>\n            \n      </nav>            <br/>\n                <Switch>\n\n                <Route exact path=\"/\" render={props => <Posts {...props} isAuthenticated={this.state.isAuthenticated} hasAuthenticated={this.hasAuthenticated}/>} />\n                <Route path=\"/post/:id\" exact component={ViewPost}/>\n\n                <Route path=\"/create\" exact render ={props => <CreatePost {...props} firstname={this.name} family_name={this.family_name}/>}/>\n                <Route path=\"/signup\" exact render={props => <RegisterUser {...props} isAuthenticated={this.isAuthenticated} hasAuthenticated={this.hasAuthenticated}/>}/>\n\n                <Route path=\"/login\" render={props => <LoginUser {...props} isAuthenticated={this.state.isAuthenticated} hasAuthenticated={this.hasAuthenticated}/>}\n                />\n                <Route component={Error}/>\n                </Switch>\n            </Router >\n            </div>\n        )\n\t}\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}