{"ast":null,"code":"var _jsxFileName = \"/Users/jonVan/Desktop/GitHub/CMPE172/test/client/src/App.js\";\nimport React from \"react\";\nimport './styles/tailwind.css';\nimport { BrowserRouter as Router, Route, Switch, Link, withRouter } from 'react-router-dom';\nimport LoginUser from './components/login-user';\nimport RegisterUser from './components/register-user';\nimport CreatePost from './components/create-post';\nimport EditPost from './components/edit-post';\nimport Posts from './components/load-posts';\nimport ViewPost from './components/view-post';\nimport config from './config';\nimport Error from './components/error';\nimport { Auth } from \"aws-amplify\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthenticated: false,\n      name: '',\n      lastname: ''\n    };\n    this.hasAuthenticated = this.hasAuthenticated.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n    this.loadFacebookSDK = this.loadFacebookSDK.bind(this);\n  }\n\n  componentWillMount() {\n    console.log(\"WHY\");\n    this.loadFacebookSDK();\n    this.onLoad();\n  }\n\n  loadFacebookSDK() {\n    window.fbAsyncInit = function () {\n      this.window.FB.init({\n        appId: config.social.FB,\n        autoLogAppEvents: true,\n        xfbml: true,\n        oauth: true,\n        version: 'v3.1'\n      });\n      window.FB.getLoginStatus(function (response) {\n        if (response.authResponse) {\n          console.log('Welcome!  Fetching your information.... ');\n          window.FB.api('/me', function (response) {\n            console.log('Good to see you, ' + response.name + '.');\n            let fulname = response.name.split();\n            this.setState({\n              name: fulname[0],\n              lastname: fulname[1]\n            });\n          });\n        } else {\n          console.log('User cancelled login or did not fully authorize.');\n        }\n      });\n    }.bind(this);\n\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n\n      if (d.getElementById(id)) {\n        return;\n      }\n\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  }\n\n  async onLoad() {\n    try {\n      console.log(\"TRYING\");\n      await Auth.currentSession();\n      this.hasAuthenticated();\n    } catch (e) {\n      if (e !== 'No current user') {\n        alert(e);\n      }\n    }\n  }\n\n  hasAuthenticated() {\n    console.log(\"DID IT\");\n    Auth.currentAuthenticatedUser().then(user => {\n      console.log(user);\n\n      if (user.attributes === null || user.attributes === undefined) {// window.FB.api('/me').then(response => {\n        // console.log('Good to see you, ' + response.name + '.');\n        // });\n      } else {\n        this.setState({\n          name: user.attributes.name,\n          lastname: user.attributes.family_name\n        });\n      }\n\n      this.setState({\n        isAuthenticated: true\n      });\n    });\n  }\n\n  async handleLogout() {\n    await Auth.signOut();\n    this.setState({\n      isAuthenticated: false\n    });\n    console.log(this.state.isAuthenticated);\n    this.props.history.push(\"/login\");\n    window.location.reload();\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Router, {\n      path: \"/App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"flex flex-wrap w-full justify-center h-16 border-b-2 border-solid font-sans border-gray-300\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"flex items-center justify-end w-full px-6 font-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      className: \"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Link, {\n      to: \"/create\",\n      className: \"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Create Post\"), this.state.isAuthenticated ? React.createElement(\"div\", {\n      class: \"hidden sm:flex sm:items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      class: \"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\",\n      onClick: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Logout\")) : React.createElement(\"div\", {\n      class: \"hidden sm:flex sm:items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      class: \"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(Link, {\n      to: \"/signup\",\n      class: \"text-gray-800 text-lg font-semibold border px-4 py-2 rounded-lg hover:text-green-600 hover:border-green-600\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Sign up\")))), \"            \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => React.createElement(Posts, Object.assign({}, props, {\n        isAuthenticated: this.state.isAuthenticated,\n        hasAuthenticated: this.hasAuthenticated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/edit/:id\",\n      exact: true,\n      component: EditPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/post/:id\",\n      exact: true,\n      component: ViewPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/create\",\n      exact: true,\n      render: props => React.createElement(CreatePost, Object.assign({}, props, {\n        firstname: this.name,\n        family_name: this.family_name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signup\",\n      exact: true,\n      render: props => React.createElement(RegisterUser, Object.assign({}, props, {\n        isAuthenticated: this.isAuthenticated,\n        hasAuthenticated: this.hasAuthenticated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      render: props => React.createElement(LoginUser, Object.assign({}, props, {\n        isAuthenticated: this.state.isAuthenticated,\n        hasAuthenticated: this.hasAuthenticated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(Route, {\n      component: Error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/jonVan/Desktop/GitHub/CMPE172/test/client/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","Link","withRouter","LoginUser","RegisterUser","CreatePost","EditPost","Posts","ViewPost","config","Error","Auth","App","Component","constructor","props","state","isAuthenticated","name","lastname","hasAuthenticated","bind","handleLogout","loadFacebookSDK","componentWillMount","console","log","onLoad","window","fbAsyncInit","FB","init","appId","social","autoLogAppEvents","xfbml","oauth","version","getLoginStatus","response","authResponse","api","fulname","split","setState","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","currentSession","e","alert","currentAuthenticatedUser","then","user","attributes","undefined","family_name","signOut","history","push","location","reload","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport './styles/tailwind.css';\nimport {BrowserRouter as Router,Route,Switch,Link,withRouter} from 'react-router-dom';\nimport LoginUser from './components/login-user';\nimport RegisterUser from './components/register-user';\nimport CreatePost from './components/create-post';\nimport EditPost from './components/edit-post';\nimport Posts from './components/load-posts';\nimport ViewPost from './components/view-post';                              \nimport config from './config';\nimport Error from './components/error';\n\nimport { Auth } from \"aws-amplify\";\n\n\nclass App extends React.Component {\t\n    constructor(props){\n        super(props)    \n        this.state ={\n            isAuthenticated:false,\n            name:'',\n            lastname:'',\n        }\n        this.hasAuthenticated = this.hasAuthenticated.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n        this.loadFacebookSDK = this.loadFacebookSDK.bind(this);\n    }\n\n    componentWillMount(){\n        console.log(\"WHY\");\n        this.loadFacebookSDK();\n        this.onLoad();\n    }\nloadFacebookSDK(){\n    window.fbAsyncInit = function() {\n        this.window.FB.init({\n            appId:config.social.FB,\n            autoLogAppEvents : true,\n            xfbml: true,\n            oauth: true,\n            version: 'v3.1',\n        });\n        window.FB.getLoginStatus(function(response) {\n                if (response.authResponse) {\n                console.log('Welcome!  Fetching your information.... ');\n                window.FB.api('/me', function(response) {\n                console.log('Good to see you, ' + response.name + '.');\n                let fulname= response.name.split();\n                this.setState({name:fulname[0], lastname:fulname[1]});\n                });\n                } else {\n                console.log('User cancelled login or did not fully authorize.');\n                }\n            });\n    }.bind(this);\n    (function(d, s, id){\n     var js, fjs = d.getElementsByTagName(s)[0];\n     if (d.getElementById(id)) {return;}\n     js = d.createElement(s); js.id = id;\n     js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n     fjs.parentNode.insertBefore(js, fjs);\n   }(document, 'script', 'facebook-jssdk'));\n}\n async onLoad() {\n    try {\n        console.log(\"TRYING\");\n        await Auth.currentSession();\n        this.hasAuthenticated();\n    }\n    catch(e) {\n        if (e !== 'No current user') {\n        alert(e);\n        }\n    }\n\n    }\n    \n    hasAuthenticated(){\n        console.log(\"DID IT\");\n        Auth.currentAuthenticatedUser()\n        .then(user => {\n            console.log(user);\n        if(user.attributes === null || user.attributes === undefined){\n            // window.FB.api('/me').then(response => {\n            // console.log('Good to see you, ' + response.name + '.');\n\n            // });\n            \n        }else{\n        this.setState({name:user.attributes.name, lastname:user.attributes.family_name});\n    }\n        this.setState({isAuthenticated:true});\n    })\n    }\n    async handleLogout() {\n        await Auth.signOut();\n\n        this.setState({isAuthenticated:false})\n        console.log(this.state.isAuthenticated);\n        this.props.history.push(\"/login\");\n        window.location.reload();\n      }\n\trender() {\n        console.log(this.state);\n    \treturn (\n            <div>\n            <Router path=\"/App\" >\n            <nav className=\"flex flex-wrap w-full justify-center h-16 border-b-2 border-solid font-sans border-gray-300\">\n            <div class=\"flex items-center justify-end w-full px-6 font-bold\">\n              \n            <Link to=\"/\" className=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">Home</Link>\n            <Link to=\"/create\" className=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">Create Post</Link>\n            {\n              this.state.isAuthenticated ?(\n                        <div class=\"hidden sm:flex sm:items-center\">\n\n          <button class=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\" onClick={this.handleLogout}>Logout</button>\n          </div>\n            )\n          :(\n            <div class=\"hidden sm:flex sm:items-center\">\n          <Link to=\"/login\" class=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">Sign in</Link>\n          <Link to=\"/signup\" class=\"text-gray-800 text-lg font-semibold border px-4 py-2 rounded-lg hover:text-green-600 hover:border-green-600\">Sign up</Link>\n          </div> \n          )\n            }\n          </div>\n            \n      </nav>            <br/>\n                <Switch>\n\n                <Route exact path=\"/\" render={props => <Posts {...props} isAuthenticated={this.state.isAuthenticated} hasAuthenticated={this.hasAuthenticated}/>} />\n                <Route path=\"/edit/:id\" exact component={EditPost}/>\n                <Route path=\"/post/:id\" exact component={ViewPost}/>\n\n                <Route path=\"/create\" exact render ={props => <CreatePost {...props} firstname={this.name} family_name={this.family_name}/>}/>\n                <Route path=\"/signup\" exact render={props => <RegisterUser {...props} isAuthenticated={this.isAuthenticated} hasAuthenticated={this.hasAuthenticated}/>}/>\n\n                <Route path=\"/login\" render={props => <LoginUser {...props} isAuthenticated={this.state.isAuthenticated} hasAuthenticated={this.hasAuthenticated}/>}\n                />\n                <Route component={Error}/>\n                </Switch>\n            </Router >\n            </div>\n        )\n\t}\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}