{"ast":null,"code":"var _jsxFileName = \"/Users/jonVan/Desktop/GitHub/cmpe172-project1/src/components/load-posts.js\";\nimport React, { Component } from 'react';\nimport { API, Auth } from \"aws-amplify\";\nexport default class LoadPost extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      posts: [],\n      profile: \"user\"\n    };\n    this.renderPosts = this.renderPosts.bind(this);\n    this.hasAuthenticated = this.props.hasAuthenticated.bind(this);\n  }\n\n  componentDidMount() {\n    this.onLoad();\n  }\n\n  goTo(e) {\n    this.props.history.push(\"/post/\".concat(e.target.value));\n  }\n\n  renderPosts() {\n    let returns = [];\n    let current = this.state.posts;\n\n    for (let item in current) {\n      let body = current[item];\n      returns.push(React.createElement(\"tr\", {\n        class: \"hover:bg-grey-lighter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        class: \"py-4 px-6 border-b border-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, body.firstname), React.createElement(\"td\", {\n        class: \"py-4 px-6 border-b border-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, body.lastname), React.createElement(\"td\", {\n        class: \"py-4 px-6 border-b border-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, new Date(body.createdAt).toLocaleString()), React.createElement(\"td\", {\n        class: \"py-4 px-6 border-b border-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, new Date(body.updatedAt).toLocaleString()), React.createElement(\"td\", {\n        class: \"py-4 px-6 border-b border-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        value: body.nodeId,\n        onClick: e => this.goTo(e),\n        className: \"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, \"View Post\"))));\n      console.log(current[item]);\n    }\n\n    return returns;\n  }\n\n  async onLoad() {\n    try {\n      await Auth.currentSession();\n      let user = await Auth.currentAuthenticatedUser();\n      this.hasAuthenticated();\n      let returns;\n\n      if (user.attributes.profile === \"admin\") {\n        console.log(\"HERE\");\n        returns = await this.getAdminPosts();\n      } else {\n        console.log(\"THERE\");\n        returns = await this.getPosts();\n      }\n\n      this.setState({\n        posts: returns,\n        isLoading: false,\n        profile: user.attributes.profile\n      });\n      console.log(returns);\n    } catch (e) {}\n\n    console.log(this.props.isAuthenticated);\n  }\n\n  getPosts() {\n    console.log(this.props);\n    return API.get(\"posts\", \"/posts\");\n  }\n\n  getAdminPosts() {\n    return API.get(\"posts\", \"/adminposts\");\n  }\n\n  render() {\n    console.log(this.state.isLoading);\n    return !this.props.isAuthenticated ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Home page - please login for posts\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, this.state.profile !== \"admin\" ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Logged User In: Here are your posts\") : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Hello Admin! Welcome to the Panel, here are all the users.\"), !this.state.isLoading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      class: \"text-left w-full border-collapse\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      class: \"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"FirstName\"), React.createElement(\"th\", {\n      class: \"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Last Name\"), React.createElement(\"th\", {\n      class: \"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Creation Date\"), React.createElement(\"th\", {\n      class: \"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Update Date\"), React.createElement(\"th\", {\n      class: \"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Go To File\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.renderPosts()))));\n  }\n\n}","map":{"version":3,"sources":["/Users/jonVan/Desktop/GitHub/cmpe172-project1/src/components/load-posts.js"],"names":["React","Component","API","Auth","LoadPost","constructor","props","state","isLoading","posts","profile","renderPosts","bind","hasAuthenticated","componentDidMount","onLoad","goTo","e","history","push","target","value","returns","current","item","body","firstname","lastname","Date","createdAt","toLocaleString","updatedAt","nodeId","console","log","currentSession","user","currentAuthenticatedUser","attributes","getAdminPosts","getPosts","setState","isAuthenticated","get","render"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { API, Auth } from \"aws-amplify\";\nexport default class LoadPost extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            isLoading:true,\n            posts:[],\n            profile:\"user\",\n        }\n        this.renderPosts = this.renderPosts.bind(this);\n        this.hasAuthenticated = this.props.hasAuthenticated.bind(this);\n    }\n    componentDidMount(){\n        this.onLoad();\n    }\n    goTo(e){\n        this.props.history.push(`/post/${e.target.value}`);\n    }\n    renderPosts(){\n        let returns = [];\n        let current = this.state.posts;\n        for(let item in current){\n            let body = current[item];\n            returns.push(       \n            <tr class=\"hover:bg-grey-lighter\">\n            <td class=\"py-4 px-6 border-b border-grey-light\">{body.firstname}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">{body.lastname}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">{new Date(body.createdAt).toLocaleString()}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">{new Date(body.updatedAt).toLocaleString()}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">\n                <button value={body.nodeId} onClick={e => this.goTo(e)} className=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">View Post</button>\n            </td>\n          </tr>\n          )\n            console.log(current[item]);\n        }\n        return returns;\n    }\n    async onLoad() {\n        try{\n        await Auth.currentSession();\n        let user = await Auth.currentAuthenticatedUser();\n        this.hasAuthenticated();\n        let returns;\n        if(user.attributes.profile === \"admin\"){\n            console.log(\"HERE\");\n            returns = await this.getAdminPosts();\n        }\n        else{\n            console.log(\"THERE\");\n\n            returns = await this.getPosts();\n        }\n        this.setState({posts:returns,isLoading:false, profile:user.attributes.profile});\n        console.log(returns);\n        }\n        catch(e){\n        }\n        console.log(this.props.isAuthenticated);\n    \n  }\n  getPosts(){\n        console.log(this.props);\n        return  API.get(\"posts\", \"/posts\");\n  }\n  getAdminPosts(){\n        return  API.get(\"posts\", \"/adminposts\");\n\n  }\n    render() {\n        console.log(this.state.isLoading);\n        return(\n            !this.props.isAuthenticated ?\n        (<div><p>Home page - please login for posts</p></div>):(\n        <div>\n            {this.state.profile !== \"admin\"?\n                <p>Logged User In: Here are your posts</p>\n                :              \n                <p>Hello Admin! Welcome to the Panel, here are all the users.</p>\n                      \n            }\n        {!this.state.isLoading &&\n                <div>\n                        <table class=\"text-left w-full border-collapse\"> \n      <thead>\n        <tr>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">FirstName</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Last Name</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Creation Date</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Update Date</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Go To File</th>\n        </tr>\n      </thead>\n      <tbody>\n          {this.renderPosts()}\n          </tbody>\n          </table>\n                </div> }\n        </div>)\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}