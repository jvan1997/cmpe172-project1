{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jonVan/Desktop/GitHub/cmpe172-project1/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{API,Auth}from\"aws-amplify\";var LoadPost=/*#__PURE__*/function(_Component){_inherits(LoadPost,_Component);function LoadPost(props){var _this;_classCallCheck(this,LoadPost);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoadPost).call(this,props));_this.state={isLoading:true,posts:[],profile:\"user\"};_this.renderPosts=_this.renderPosts.bind(_assertThisInitialized(_this));_this.hasAuthenticated=_this.props.hasAuthenticated.bind(_assertThisInitialized(_this));return _this;}_createClass(LoadPost,[{key:\"componentDidMount\",value:function componentDidMount(){this.onLoad();}},{key:\"goTo\",value:function goTo(e){this.props.history.push(\"/post/\".concat(e.target.value));}},{key:\"renderPosts\",value:function renderPosts(){var _this2=this;var returns=[];var current=this.state.posts;for(var item in current){var body=current[item];returns.push(React.createElement(\"tr\",{class:\"hover:bg-grey-lighter\"},React.createElement(\"td\",{class:\"py-4 px-6 border-b border-grey-light\"},body.firstname),React.createElement(\"td\",{class:\"py-4 px-6 border-b border-grey-light\"},body.lastname),React.createElement(\"td\",{class:\"py-4 px-6 border-b border-grey-light\"},new Date(body.createdAt).toLocaleString()),React.createElement(\"td\",{class:\"py-4 px-6 border-b border-grey-light\"},new Date(body.updatedAt).toLocaleString()),React.createElement(\"td\",{class:\"py-4 px-6 border-b border-grey-light\"},React.createElement(\"button\",{value:body.nodeId,onClick:function onClick(e){return _this2.goTo(e);},className:\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\"},\"View Post\"))));console.log(current[item]);}return returns;}},{key:\"onLoad\",value:function(){var _onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,returns;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Auth.currentSession();case 3:_context.next=5;return Auth.currentAuthenticatedUser();case 5:user=_context.sent;this.hasAuthenticated();if(!(user.attributes.profile===\"admin\")){_context.next=14;break;}console.log(\"HERE\");_context.next=11;return this.getAdminPosts();case 11:returns=_context.sent;_context.next=18;break;case 14:console.log(\"THERE\");_context.next=17;return this.getPosts();case 17:returns=_context.sent;case 18:this.setState({posts:returns,isLoading:false,profile:user.attributes.profile});console.log(returns);_context.next=24;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](0);case 24:console.log(this.props.isAuthenticated);case 25:case\"end\":return _context.stop();}}},_callee,this,[[0,22]]);}));function onLoad(){return _onLoad.apply(this,arguments);}return onLoad;}()},{key:\"getPosts\",value:function getPosts(){console.log(this.props);return API.get(\"posts\",\"/posts\");}},{key:\"getAdminPosts\",value:function getAdminPosts(){return API.get(\"posts\",\"/adminposts\");}},{key:\"render\",value:function render(){console.log(this.state.isLoading);return!this.props.isAuthenticated?React.createElement(\"div\",null,React.createElement(\"p\",null,\"Home page - please login for posts\")):React.createElement(\"div\",null,this.state.profile!==\"admin\"?React.createElement(\"p\",null,\"Logged User In: Here are your posts\"):React.createElement(\"p\",null,\"Hello Admin! Welcome to the Panel, here are all the users.\"),!this.state.isLoading&&React.createElement(\"div\",null,React.createElement(\"table\",{class:\"text-left w-full border-collapse\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{class:\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\"},\"FirstName\"),React.createElement(\"th\",{class:\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\"},\"Last Name\"),React.createElement(\"th\",{class:\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\"},\"Creation Date\"),React.createElement(\"th\",{class:\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\"},\"Update Date\"),React.createElement(\"th\",{class:\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\"},\"Go To File\"))),React.createElement(\"tbody\",null,this.renderPosts()))));}}]);return LoadPost;}(Component);export{LoadPost as default};","map":{"version":3,"sources":["/Users/jonVan/Desktop/GitHub/cmpe172-project1/src/components/load-posts.js"],"names":["React","Component","API","Auth","LoadPost","props","state","isLoading","posts","profile","renderPosts","bind","hasAuthenticated","onLoad","e","history","push","target","value","returns","current","item","body","firstname","lastname","Date","createdAt","toLocaleString","updatedAt","nodeId","goTo","console","log","currentSession","currentAuthenticatedUser","user","attributes","getAdminPosts","getPosts","setState","isAuthenticated","get"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { API, Auth } from \"aws-amplify\";\nexport default class LoadPost extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            isLoading:true,\n            posts:[],\n            profile:\"user\",\n        }\n        this.renderPosts = this.renderPosts.bind(this);\n        this.hasAuthenticated = this.props.hasAuthenticated.bind(this);\n    }\n    componentDidMount(){\n        this.onLoad();\n    }\n    goTo(e){\n        this.props.history.push(`/post/${e.target.value}`);\n    }\n    renderPosts(){\n        let returns = [];\n        let current = this.state.posts;\n        for(let item in current){\n            let body = current[item];\n            returns.push(       \n            <tr class=\"hover:bg-grey-lighter\">\n            <td class=\"py-4 px-6 border-b border-grey-light\">{body.firstname}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">{body.lastname}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">{new Date(body.createdAt).toLocaleString()}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">{new Date(body.updatedAt).toLocaleString()}</td>\n            <td class=\"py-4 px-6 border-b border-grey-light\">\n                <button value={body.nodeId} onClick={e => this.goTo(e)} className=\"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4\">View Post</button>\n            </td>\n          </tr>\n          )\n            console.log(current[item]);\n        }\n        return returns;\n    }\n    async onLoad() {\n        try{\n        await Auth.currentSession();\n        let user = await Auth.currentAuthenticatedUser();\n        this.hasAuthenticated();\n        let returns;\n        if(user.attributes.profile === \"admin\"){\n            console.log(\"HERE\");\n            returns = await this.getAdminPosts();\n        }\n        else{\n            console.log(\"THERE\");\n\n            returns = await this.getPosts();\n        }\n        this.setState({posts:returns,isLoading:false, profile:user.attributes.profile});\n        console.log(returns);\n        }\n        catch(e){\n        }\n        console.log(this.props.isAuthenticated);\n    \n  }\n  getPosts(){\n        console.log(this.props);\n        return  API.get(\"posts\", \"/posts\");\n  }\n  getAdminPosts(){\n        return  API.get(\"posts\", \"/adminposts\");\n\n  }\n    render() {\n        console.log(this.state.isLoading);\n        return(\n            !this.props.isAuthenticated ?\n        (<div><p>Home page - please login for posts</p></div>):(\n        <div>\n            {this.state.profile !== \"admin\"?\n                <p>Logged User In: Here are your posts</p>\n                :              \n                <p>Hello Admin! Welcome to the Panel, here are all the users.</p>\n                      \n            }\n        {!this.state.isLoading &&\n                <div>\n                        <table class=\"text-left w-full border-collapse\"> \n      <thead>\n        <tr>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">FirstName</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Last Name</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Creation Date</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Update Date</th>\n            <th class=\"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light\">Go To File</th>\n        </tr>\n      </thead>\n      <tbody>\n          {this.renderPosts()}\n          </tbody>\n          </table>\n                </div> }\n        </div>)\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}