(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{178:function(e,t,a){e.exports=a(741)},67:function(e,t){},741:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(175),o=a.n(s),i=a(4),l=a.n(i),c=a(8),u=a(11),d=a(12),h=a(14),m=a(13),p=a(7),b=a(15),f=(a(90),a(30)),g=a(29),v=a(28),y=a(6),E=a.n(y),x=a(24),w=a.n(x);n.Component;var k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleFbLogin=function(){a.props.hasAuthenticated(!0),a.props.history.push("/")},a.state={username:"",password:"",isLoading:!1},a.onChange=a.onChange.bind(Object(p.a)(a)),a.onSubmit=a.onSubmit.bind(Object(p.a)(a)),a.validateForm=a.validateForm.bind(Object(p.a)(a)),a.hasAuthenticated=a.props.hasAuthenticated.bind(Object(p.a)(a)),a.setIsLoading=a.setIsLoading.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"setIsLoading",value:function(){this.setState({isLoading:!0})}},{key:"onChange",value:function(e){console.log(e.target.value),this.setState(Object(v.a)({},e.target.id,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("thsi is goind it"),t.preventDefault(),this.setIsLoading(),console.log(this.props),e.prev=4,e.next=7,y.Auth.signIn(this.state.username,this.state.password);case 7:this.props.hasAuthenticated(!0),this.props.history.push("/"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),alert(e.t0.message),console.log(e.t0),this.setState({isLoading:!1});case 16:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"flex items-center h-full w-full"},r.a.createElement("div",{className:"container-sm w-full-w/o-margins max-w-sm mx-auto mt-1/10 bg-white text-center rounded"},r.a.createElement("h3",null,"Login User"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",null,"Username: "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"username",onChange:this.onChange,type:"email",value:this.state.username,placeholder:"Enter email"})),r.a.createElement("label",null,"Password "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"password",onChange:this.onChange,type:"password",value:this.state.password,placeholder:"Enter email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Login",disabled:!this.validateForm(),className:"font-boldcursor-pointer border border-solid p-2 border-green-600 rounded text-gray-700"}))),r.a.createElement("hr",null),this.state.isLoading&&r.a.createElement("div",{className:"text-center items-center justify-center flex"},r.a.createElement(w.a,{type:"bars",color:"#38a169",height:"20%",width:"20%"}))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",name:"",lastname:"",isLoading:!1,newUser:!1,confirmationCode:"",adminP:""},a.onChange=a.onChange.bind(Object(p.a)(a)),a.onSubmit=a.onSubmit.bind(Object(p.a)(a)),a.validateForm=a.validateForm.bind(Object(p.a)(a)),a.setIsLoading=a.setIsLoading.bind(Object(p.a)(a)),a.submitCode=a.submitCode.bind(Object(p.a)(a)),a.validCode=a.validCode.bind(Object(p.a)(a)),a.hasAuthenticated=a.props.hasAuthenticated.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.password.length>0&&this.state.name.length>0&&this.state.lastname.length>0}},{key:"setIsLoading",value:function(){this.setState({isLoading:!0})}},{key:"submitCode",value:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setIsLoading(),e.prev=2,e.next=5,y.Auth.confirmSignUp(this.state.username,this.state.confirmationCode);case 5:return e.next=7,y.Auth.signIn(this.state.username,this.state.password);case 7:this.props.hasAuthenticated(!0),this.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.message),this.setState({isLoading:!1});case 15:console.log(this.state.confirmationCode);case 16:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"validCode",value:function(){return this.state.confirmationCode.length>0}},{key:"onChange",value:function(e){console.log(e.target.value),this.setState(Object(v.a)({},e.target.id,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a={username:this.state.username,password:this.state.password,attributes:{family_name:this.state.lastname,name:this.state.name}},null===this.state.adminP||"0000"!==this.state.adminP){e.next=6;break}a.attributes.profile="admin",e.next=12;break;case 6:if(null===this.state.adminP||""!==this.state.adminP){e.next=10;break}a.attributes.profile="user",e.next=12;break;case 10:return alert("Incorrect admin password, try again or remove the whole field."),e.abrupt("return");case 12:return e.prev=12,this.setIsLoading(),e.next=16,y.Auth.signUp(a);case 16:this.setState({newUser:!0}),this.setState({isLoading:!1}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(12),alert(e.t0.message),this.setState({isLoading:!1});case 24:case"end":return e.stop()}}),e,this,[[12,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"flex items-center h-full w-full"},r.a.createElement("div",{className:"container-sm w-full-w/o-margins max-w-sm mx-auto mt-1/10 bg-white text-center rounded"},!1===this.state.newUser?r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("h3",null,"Create New User"),r.a.createElement("label",null,"Username: "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"username",onChange:this.onChange,type:"email",value:this.state.username,placeholder:"Enter email"})),r.a.createElement("label",null,"Name: "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"name",onChange:this.onChange,type:"text",value:this.state.name,placeholder:"Enter first name"})),r.a.createElement("label",null,"Last Name: "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"lastname",onChange:this.onChange,type:"text",value:this.state.lastname,placeholder:"Enter last name"})),r.a.createElement("label",null,"Password "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"password",onChange:this.onChange,type:"password",value:this.state.password,placeholder:"Enter password"})),r.a.createElement("label",null,"If you are an admin, enter the admin password"),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"adminP",onChange:this.onChange,type:"password",value:this.state.adminP,placeholder:"Enter password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Create User",disabled:!this.validateForm(),className:"font-bold cursor-pointer border border-solid p-2 border-green-600 rounded text-gray-700"})),this.state.isLoading&&r.a.createElement("div",{className:"text-center items-center justify-center flex"},r.a.createElement(w.a,{type:"bars",color:"#38a169",height:"20%",width:"20%"}))):r.a.createElement("div",null,r.a.createElement("h3",null,"Confirmation Code"),r.a.createElement("h4",null,"Please check your email for the code"),r.a.createElement("form",{onSubmit:this.submitCode},r.a.createElement("label",null,"Confirmation Code "),r.a.createElement("div",{className:"flex flex-col w-full mb-4 items-center"},r.a.createElement("input",{className:"shadow appearance-none bg-white font-bold border border-solid border-green-600 w-full rounded h-14 py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",id:"confirmationCode",onChange:this.onChange,type:"text",value:this.state.confirmationCode,placeholder:"Enter Code"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Submit Code",disabled:!this.validCode(),className:"font-bold cursor-pointer border border-solid p-2 border-green-600 rounded text-gray-700"})),this.state.isLoading&&r.a.createElement("div",{className:"text-center items-center justify-center flex"},r.a.createElement(w.a,{type:"bars",color:"#38a169",height:"20%",width:"20%"}))))))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onChangeHandler=function(e){var t=e.target.files[0];return t&&!t.name?(window.alert("Please select a file"),!1):t.size>1e7?(window.alert("Please upload a file smaller than 10 MB"),e.target.value=null,!1):(console.log(e.target.files[0]),void a.setState({selectedFile:e.target.files[0],hasFile:!0}))},a.state={username:"",content:"",title:"",date:new Date,price:0,image:"",users:[],selectedFile:null,hasFile:!1,isLoading:!1,noUser:!0},a.onChange=a.onChange.bind(Object(p.a)(a)),a.onSubmit=a.onSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({users:["testuser"],username:"testuser"});try{y.Auth.currentAuthenticatedUser().then((function(t){console.log("HI"),console.log(t),e.setState({noUser:!1,name:t.attributes.name,lastname:t.attributes.family_name})}))}catch(t){console.log(t)}}},{key:"onChange",value:function(e){this.setState(Object(v.a)({},e.target.id,e.target.value))}},{key:"s3Upload",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Date.now(),"-").concat(t.name),e.next=3,y.Storage.vault.put(a,t,{contentType:t.type});case 3:return n=e.sent,console.log(n.key),e.abrupt("return",n.key);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(this.state),""!==this.state.content&&""!==this.state.title&&null!==this.state.file){e.next=5;break}return alert("Please fill out all fields"),e.abrupt("return");case 5:if(!this.state.selectedFile){e.next=11;break}return e.next=8,this.s3Upload(this.state.selectedFile);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=null;case 12:return a=e.t0,this.setState({isLoading:!0}),n={firstname:this.state.name,lastname:this.state.lastname,content:this.state.content,title:this.state.title,file:a},e.prev=15,e.next=18,this.createPost(n);case 18:this.props.history.push("/"),e.next=25;break;case 21:e.prev=21,e.t1=e.catch(15),alert(e.t1),this.setState({isLoading:!1});case 25:console.log(n);case 26:case"end":return e.stop()}}),e,this,[[15,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createPost",value:function(e){return console.log(this.state.name,this.state.lastname,this.state.content),console.log(e),y.API.post("posts","/posts",{body:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flex items-center h-full w-full"},this.state.noUser&&r.a.createElement("div",null,r.a.createElement("p",null,"Please login/register to create a post")),!this.state.noUser&&r.a.createElement("div",{className:"container-sm border-2 border-solid border-green-600 max-w-sm mx-auto mt-1/10 bg-white rounded p-10 shadow-lg"},r.a.createElement("p",{className:"w-full block font-sans text-2xl font-bold text-center justify-center mb-14"},"Write new Post"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"items-center flex justify-center"},r.a.createElement("label",{className:"font-bold"},"Title: "),r.a.createElement("input",{type:"text",id:"title",required:!0,className:"w-32 h-10 border border-solid border-green-600 rounded mb-4",value:this.state.description,onChange:function(t){return e.onChange(t)}})),r.a.createElement("div",{className:"items-center flex justify-center"},r.a.createElement("label",{className:"font-bold"},"File: "),r.a.createElement("input",{type:"file",id:"file",name:"file",className:"w-auto border border-solid border-green-600 rounded mb-4 ",onChange:function(t){return e.onChangeHandler(t)}})),r.a.createElement("div",{className:"items-center block justify-center"},r.a.createElement("label",{className:"font-bold"},"Description: "),r.a.createElement("div",null,r.a.createElement("textarea",{className:"w-64 border border-solid border-green-700  rounded h-64 overflow-auto",value:this.state.content,id:"content",onChange:function(t){return e.onChange(t)}}))),r.a.createElement("div",{className:"items-center flex justify-center"},r.a.createElement("input",{type:"submit",value:"Create Post",className:"px-4 py-2 rounded border border-solid border-green-400"})),this.state.isLoading&&r.a.createElement("div",{className:"text-center items-center justify-center flex"},r.a.createElement(w.a,{type:"bars",color:"#38a169",height:"20%",width:"20%"})))))}}]),t}(n.Component),C=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"This edits a Post"))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!0,posts:[]},a.renderPosts=a.renderPosts.bind(Object(p.a)(a)),a.hasAuthenticated=a.props.hasAuthenticated.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.onLoad()}},{key:"goTo",value:function(e){this.props.history.push("/post/".concat(e.target.value))}},{key:"renderPosts",value:function(){var e=this,t=[],a=this.state.posts;for(var n in a){var s=a[n];t.push(r.a.createElement("tr",{class:"hover:bg-grey-lighter"},r.a.createElement("td",{class:"py-4 px-6 border-b border-grey-light"},s.firstname),r.a.createElement("td",{class:"py-4 px-6 border-b border-grey-light"},s.lastname),r.a.createElement("td",{class:"py-4 px-6 border-b border-grey-light"},new Date(s.createdAt).toLocaleString()),r.a.createElement("td",{class:"py-4 px-6 border-b border-grey-light"},new Date(s.updatedAt).toLocaleString()),r.a.createElement("td",{class:"py-4 px-6 border-b border-grey-light"},r.a.createElement("button",{value:s.nodeId,onClick:function(t){return e.goTo(t)},className:"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4"},"View Post")))),console.log(a[n])}return t}},{key:"onLoad",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Auth.currentSession();case 3:return e.next=5,y.Auth.currentAuthenticatedUser();case 5:if(t=e.sent,this.hasAuthenticated(),"admin"!==t.attributes.profile){e.next=14;break}return console.log("HERE"),e.next=11,this.getAdminPosts();case 11:a=e.sent,e.next=18;break;case 14:return console.log("THERE"),e.next=17,this.getPosts();case 17:a=e.sent;case 18:this.setState({posts:a,isLoading:!1}),console.log(a),e.next=24;break;case 22:e.prev=22,e.t0=e.catch(0);case 24:console.log(this.props.isAuthenticated);case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAdminPosts",value:function(){return y.API.get("posts","/adminposts")}},{key:"getPosts",value:function(){return y.API.get("posts","/posts")}},{key:"render",value:function(){return console.log(this.state.isLoading),this.props.isAuthenticated?r.a.createElement("div",null,r.a.createElement("p",null,"Logged In: here are your posts"),!this.state.isLoading&&r.a.createElement("div",null,r.a.createElement("table",{class:"text-left w-full border-collapse"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{class:"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light"},"FirstName"),r.a.createElement("th",{class:"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light"},"Last Name"),r.a.createElement("th",{class:"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light"},"Creation Date"),r.a.createElement("th",{class:"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light"},"Update Date"),r.a.createElement("th",{class:"py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light"},"Go To File"))),r.a.createElement("tbody",null,this.renderPosts())))):r.a.createElement("div",null,r.a.createElement("p",null,"Home page - please login for posts"))}}]),t}(n.Component),P=a(86),A=a.n(P),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onChangeHandler=function(e){var t=e.target.files[0];if(t&&!t.name)return window.alert("Please select a file"),!1;if(t.size>1e7)return window.alert("Please upload a file smaller than 10 MB"),e.target.value=null,!1;console.log(e.target.files[0]);var n=a.state.editPost;n.files=e.target.files[0],console.log(n),a.setState({editPost:n})},a.state={post:null,content:"",loaded:!1,edit:!1,deleting:!1,userInfo:{}},a.changePost=a.changePost.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.onLoad()}},{key:"handleChange",value:function(e){var t=this.state.editPost;t[e.target.id]=e.target.value,this.setState({editPost:t})}},{key:"loadNote",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hi?"),t=this.props.match.params.id,e.next=4,y.Auth.currentAuthenticatedUser();case 4:if(a=e.sent,console.log(a),this.setState({userInfo:a.attributes}),"admin"!==a.attributes.profile){e.next=12;break}return console.log("here"),e.abrupt("return",y.API.get("posts","/adminposts/".concat(t)));case 12:return console.log("HER"),e.abrupt("return",y.API.get("posts","/posts/".concat(t)));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoad",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadNote();case 3:if(!(t=1===(t=e.sent).length?t[0]:t).attachment){e.next=10;break}return console.log(t.attachment),e.next=9,y.Storage.vault.get(t.attachment);case 9:t.attachmentURL=e.sent;case 10:a=A()(t),this.setState({post:t,loaded:!0,editPost:a}),console.log(this.state),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),this.setState({failed:!0});case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"changePost",value:function(){var e=this.state.editPost;e.title="holder",this.setState({edit:!0,editPost:e}),console.log(this.state)}},{key:"s3Upload",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Date.now(),"-").concat(t.name),e.next=3,y.Storage.vault.put(a,t,{contentType:t.type});case 3:return n=e.sent,console.log(n.key),e.abrupt("return",n.key);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"startDelete",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Confirm deletion of this post.")){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,this.setState({deleting:!0}),a=this.props.match.params.id,n={userId:this.state.post.userId},console.log(n),"admin"!==this.state.userInfo.profile){e.next=15;break}return console.log("IN HERE"),e.next=13,y.API.del("posts","/adminposts/".concat(a),{body:n});case 13:e.next=17;break;case 15:return e.next=17,y.API.del("posts","/posts/".concat(a));case 17:this.props.history.push("/"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),alert(e.t0),this.setState({deleting:!1});case 24:case"end":return e.stop()}}),e,this,[[4,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"newSave",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),a=!1,this.state.post)(this.state.post[n]!==this.state.editPost[n]||null!==this.state.editPost.files&&void 0!==this.state.editPost.files)&&(a=!0);if(!1!==a){e.next=6;break}return alert("No new changes found or Empty field found"),e.abrupt("return");case 6:if(!0!==a&&(null===this.state.editPost.files||void 0===this.state.editPost.files)){e.next=29;break}if(!this.state.editPost.files){e.next=13;break}return e.next=10,this.s3Upload(this.state.editPost.files);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=this.state.post.attachment;case 14:return r=e.t0,console.log(r),this.setState({isUpdating:!0}),s={firstname:this.state.editPost.firstname,lastname:this.state.editPost.lastname,content:this.state.editPost.content,title:this.state.editPost.title,file:r},e.prev=18,o=this.props.match.params.id,e.next=22,y.API.put("posts","/posts/".concat(o),{body:s});case 22:this.props.history.push("/"),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(18),this.setState({isUpdating:!1}),console.log(e.t1);case 29:case"end":return e.stop()}}),e,this,[[18,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.failed&&r.a.createElement("div",null,r.a.createElement("p",null,"Unauthorized access (need to login) or post does not exist")),this.state.loaded&&!this.state.edit&&r.a.createElement("div",null,r.a.createElement("p",null,"This views a Post"),r.a.createElement("p",null,"Title: ",this.state.post.title),r.a.createElement("p",null,"Name: ",this.state.post.firstname+" "+this.state.post.lastname),r.a.createElement("p",null,"Content: ",this.state.post.content),r.a.createElement("p",null,"Created: ",new Date(this.state.post.createdAt).toLocaleString()),r.a.createElement("p",null,"Updated: ",new Date(this.state.post.updatedAt).toLocaleString()),r.a.createElement("div",{className:"flex"},r.a.createElement("p",null,"Click to download file:"),r.a.createElement("p",{onClick:function(){return window.location=e.state.post.attachmentURL},className:"cursor-pointer text-blue-600 hover:text-blue-300"},this.state.post.attachment)),"admin"!==this.state.userInfo.profile&&r.a.createElement("button",{className:"h-10 p-2 w-16 rounded text-white bg-green-600 ml-2 mr-2",onClick:function(){return e.changePost()}},"Edit"),r.a.createElement("button",{className:"h-10 p-2 rounded text-white bg-red-500 ml-2 ",onClick:function(t){return e.startDelete(t)}},"Delete"),this.state.deleting&&r.a.createElement("div",{className:"text-center items-center justify-center flex"},r.a.createElement(w.a,{type:"bars",color:"#c53030",height:"20%",width:"20%"}))),this.state.loaded&&this.state.edit&&r.a.createElement("div",{className:""},r.a.createElement("p",null,"This edits a post"),r.a.createElement("form",{className:""},r.a.createElement("label",{className:"mb-2"},"Title "),r.a.createElement("div",{className:"mb-4"},r.a.createElement("input",{class:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"title",onChange:function(t){return e.handleChange(t)},value:this.state.editPost.title,type:"text"})),r.a.createElement("label",{className:"mb-2"},"First Name"),r.a.createElement("div",{className:"mb-4"},r.a.createElement("input",{class:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"firstname",onChange:function(t){return e.handleChange(t)},value:this.state.editPost.firstname,type:"text"})),r.a.createElement("label",{className:"mb-2"},"Last Name "),r.a.createElement("div",{className:"mb-4"},r.a.createElement("input",{class:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"lastname",onChange:function(t){return e.handleChange(t)},value:this.state.editPost.lastname,type:"text"})),r.a.createElement("label",{className:"mb-2"},"Content "),r.a.createElement("div",{className:"mb-4"},r.a.createElement("input",{class:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"content",onChange:function(t){return e.handleChange(t)},value:this.state.editPost.content,type:"text"})),r.a.createElement("div",null,r.a.createElement("p",null,"Current file on reference:"),r.a.createElement("p",null,"Please note that if you upload and save a new file, this current file will be removed."),r.a.createElement("p",{onClick:function(){return window.location=e.state.post.attachmentURL},className:"cursor-pointer text-blue-600 hover:text-blue-300"},this.state.post.attachment)),r.a.createElement("div",null,r.a.createElement("label",{className:"font-bold"},"File: "),r.a.createElement("input",{type:"file",id:"file",name:"file",className:"w-auto border border-solid border-green-600 rounded mb-4 ",onChange:function(t){return e.onChangeHandler(t)}})),r.a.createElement("button",{className:"h-10 p-2 w-16 rounded text-white bg-black ml-2 mr-2",onClick:function(){return e.setState({edit:!1,editPost:A()(e.state.post)})}},"Cancel"),r.a.createElement("button",{value:"Save",className:"h-10 p-2 rounded text-white bg-green-500 ml-2 ",onClick:function(t){return e.newSave(t)}},"Save ")),this.state.isUpdating&&r.a.createElement("div",{className:"text-center items-center justify-center flex"},r.a.createElement(w.a,{type:"bars",color:"#38a169",height:"20%",width:"20%"}))))}}]),t}(n.Component);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var L=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({MAX_ATTACHMENT_SIZE:5e6},"prod"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_STAGE?{s3:{REGION:"us-west-2",BUCKET:"cmpe-172-proj2-api-prod-cmpe172bucket-1iutvufkktsk0"},apiGateway:{REGION:"us-west-2",URL:"https://u7itb3clyk.execute-api.us-west-2.amazonaws.com/prod"},cognito:{REGION:"us-west-2",USER_POOL_ID:"us-west-2_gHJ5wFlgi",APP_CLIENT_ID:"6v0oi2rvrl0fpqebfr6p00rj03",IDENTITY_POOL_ID:"us-west-2:d8804d78-b5e4-4119-8bbb-012efffb8d2c"}}:{s3:{REGION:"us-west-2",BUCKET:"cmpe-172-proj2-api-dev-cmpe172bucket-1webiq0g7633m"},apiGateway:{REGION:"us-west-2",URL:"https://yxixu3zwyj.execute-api.us-west-2.amazonaws.com/dev"},cognito:{REGION:"us-west-2",USER_POOL_ID:"us-west-2_Qxo5EYjR8",APP_CLIENT_ID:"7u8u3k53p18srgqvaibf2sfvss",IDENTITY_POOL_ID:"us-west-2:f3434436-e43c-43ee-9c2b-8541e967cddf"}});function D(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",null,"Sorry, page not found!"))}var U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={isAuthenticated:!1,name:"",lastname:""},a.hasAuthenticated=a.hasAuthenticated.bind(Object(p.a)(a)),a.handleLogout=a.handleLogout.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){console.log("WHY"),this.onLoad()}},{key:"onLoad",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("TRYING"),e.next=4,y.Auth.currentSession();case 4:this.hasAuthenticated(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasAuthenticated",value:function(){var e=this;console.log("DID IT"),y.Auth.currentAuthenticatedUser().then((function(t){console.log("USER"),console.log(t),e.setState({name:t.attributes.name,lastname:t.attributes.family_name,profile:t.attributes.profile}),e.setState({isAuthenticated:!0})}))}},{key:"handleLogout",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Auth.signOut();case 2:this.setState({isAuthenticated:!1}),console.log(this.state.isAuthenticated),this.props.history.push("/login"),window.location.reload();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement("div",null,r.a.createElement(f.a,{path:"/App"},r.a.createElement("nav",{className:"flex flex-wrap w-full justify-center h-16 border-b-2 border-solid font-sans border-gray-300"},r.a.createElement("div",{class:"flex items-center justify-end w-full px-6 font-bold"},r.a.createElement(f.b,{to:"/",className:"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4"},"Home"),"admin"!==this.state.profile&&r.a.createElement(f.b,{to:"/create",className:"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4"},"Create Post"),"            ",this.state.isAuthenticated?r.a.createElement("div",{class:"hidden sm:flex sm:items-center"},r.a.createElement("button",{class:"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4",onClick:this.handleLogout},"Logout")):r.a.createElement("div",{class:"hidden sm:flex sm:items-center"},r.a.createElement(f.b,{to:"/login",class:"text-gray-800 text-lg font-semibold hover:text-green-600 mr-4"},"Sign in"),r.a.createElement(f.b,{to:"/signup",class:"text-gray-800 text-lg font-semibold border px-4 py-2 rounded-lg hover:text-green-600 hover:border-green-600"},"Sign up")))),"            ",r.a.createElement("br",null),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(N,Object.assign({},t,{isAuthenticated:e.state.isAuthenticated,hasAuthenticated:e.hasAuthenticated}))}}),r.a.createElement(g.a,{path:"/edit/:id",exact:!0,component:C}),r.a.createElement(g.a,{path:"/post/:id",exact:!0,component:S}),r.a.createElement(g.a,{path:"/create",exact:!0,render:function(t){return r.a.createElement(j,Object.assign({},t,{firstname:e.name,family_name:e.family_name}))}}),r.a.createElement(g.a,{path:"/signup",exact:!0,render:function(t){return r.a.createElement(O,Object.assign({},t,{isAuthenticated:e.isAuthenticated,hasAuthenticated:e.hasAuthenticated}))}}),r.a.createElement(g.a,{path:"/login",render:function(t){return r.a.createElement(k,Object.assign({},t,{isAuthenticated:e.state.isAuthenticated,hasAuthenticated:e.hasAuthenticated}))}}),r.a.createElement(g.a,{component:D}))))}}]),t}(r.a.Component),T=Object(g.f)(U);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(18),R=Object(_.a)();E.a.configure({Auth:{mandatorySignIn:!0,region:L.cognito.REGION,userPoolId:L.cognito.USER_POOL_ID,identityPoolId:L.cognito.IDENTITY_POOL_ID,userPoolWebClientId:L.cognito.APP_CLIENT_ID},Storage:{region:L.s3.REGION,bucket:L.s3.BUCKET,identityPoolId:L.cognito.IDENTITY_POOL_ID},API:{endpoints:[{name:"posts",endpoint:L.apiGateway.URL,region:L.apiGateway.REGION}]}}),o.a.render(r.a.createElement(f.a,{history:R},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){}},[[178,1,2]]]);
//# sourceMappingURL=main.d4177837.chunk.js.map